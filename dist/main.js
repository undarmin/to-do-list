(()=>{"use strict";const e=class{constructor(e,t,o,n){this.title=e,this.description=t,this.dueDate=o,this.priority=n}},t=class{constructor(e){this.name=e,this.tasks=[],this.taskNodes=[]}addTask(e){this.tasks.push(e)}addTaskNode(e){this.taskNodes.push(e)}},o=function(){const e=document.querySelector("#wrapper"),t=document.querySelector("#add-task"),o=document.querySelector("#task-modal"),n={form:document.querySelector("#task-info"),closeButton:document.querySelector("#close-modal"),submitButton:document.querySelector("#submit-modal")},c=document.querySelector("#project-modal"),a={form:document.querySelector("#project-info"),closeButton:document.querySelector("#close-project-modal"),submitButton:document.querySelector("#submit-project-modal")},r=document.querySelector("#active-project"),s=document.querySelector("#projects");document.querySelector("#new-project").addEventListener("click",(()=>{i(c)})),a.closeButton.addEventListener("click",(()=>{l(c)}));const d=[];function i(e){e.showModal()}function l(e){e.close()}function u(e,t,o){const n=e.createdNode,c=e.task;o.removeChild(n),t.splice(t.indexOf(c),1)}return t.addEventListener("click",(()=>{i(o)})),n.closeButton.addEventListener("click",(()=>{l(o)})),{taskModalComponents:n,submitData:function(e,t,o){const n=Object.fromEntries(new FormData(o.form));if(function(e){for(let t in e)if(!e[t])return!1;return!0}(n))return o.form.reset(),e.preventDefault(),l(t),n},createTaskInDOM:function(e,t){const o=document.createElement("div"),n=function(e){const t=document.createElement("h4");t.textContent=e.title;const o=document.createElement("p");o.textContent=e.description;const n=document.createElement("span");n.textContent=e.dueDate+" ";const c=document.createElement("span");c.textContent=e.priority;const a=document.createElement("button"),r={title:t,description:o,dueDate:n,priority:c,deleteTask:a};return a.textContent="Delete Task",r}(e);o.style.border="1px solid black";for(let e in n)o.appendChild(n[e]);return n.deleteTask.addEventListener("click",(()=>{u({task:e,createdNode:o},d,t)})),t.appendChild(o),d.push({task:e,createdNode:o}),{task:e,createdNode:o}},removeTask:u,setProjectNode:function(e){r.textContent="Active Project: "+e.name},createProjectNode:function(e){const t=document.createElement("div"),o=document.createElement("p"),n=document.createElement("button");return n.textContent="set as active",o.textContent=e.name+" Project",t.appendChild(o),t.appendChild(n),function(e){const t=document.createElement("li");t.textContent=e.name,s.appendChild(t)}(e),t},appendProjectNode:function(t){e.appendChild(t)},taskModal:o,taskModalComponents:n,projectModal:c,projectModalComponents:a}}(),n=new t("Default"),c={all:[]},a={all:[]};c.active=n;const r=o.createProjectNode(c.active);c.all.push(n),o.setProjectNode(c.active),a.active=r,a.all.push(r),r.children[1].addEventListener("click",(()=>{o.setProjectNode(n),c.active=n,a.active=r})),o.appendProjectNode(r),o.projectModalComponents.submitButton.addEventListener("click",(e=>{!function(e){const n=o.submitData(e,o.projectModal,o.projectModalComponents);if(!n)return;const r=new t(n.name);c.all.push(r);const s=o.createProjectNode(r);o.appendProjectNode(s),"on"===n.setActive&&(c.active=r,o.setProjectNode(c.active),a.active=s),s.children[1].addEventListener("click",(()=>{o.setProjectNode(r),c.active=r,a.active=s}))}(e)})),o.taskModalComponents.submitButton.addEventListener("click",(t=>{!function(t){const n=o.submitData(t,o.taskModal,o.taskModalComponents);if(!n)return;const r=new e(n.title,n.description,n.duedate,n.priority);console.log(c.active,a.active),c.active.addTask(r);const s=o.createTaskInDOM(r,a.active);c.active.addTaskNode(s)}(t)}));const s=new e("m","m","m/m/m","9"),d=o.createTaskInDOM(s,r);c.active.addTask(s),c.active.addTaskNode(d)})();